{% extends 'main/base.html' %}

{% block title %}
  Онлайн анализ видео
{% endblock %}

{% block content %}

<div class="container text-center">

  <h1 class="display-4 mt-5 fw-normal text-body-emphasis">Онлайн анализ видео</h1>
  <div id="timer" class="mt-3" data-load-time="{{ load_time }}"></div>

  <form id="videoForm" method="post" enctype="multipart/form-data">
    {% csrf_token %}
    <button id="submitButton" type="submit" class="btn btn-primary">
      Закончить запись видео
    </button>
  </form>

  <div id="processingMessage" class="mt-3" style="display: none;">
    Подождите, видео обрабатывается...
  </div>

</div>

<script src="/static/stuff_to_html/js/online_analysis.js"></script>
<script>
  document.getElementById("videoForm").addEventListener("submit", function(event) {
    // event.preventDefault();
    document.getElementById("submitButton").style.display = "none";
    document.getElementById("processingMessage").style.display = "block";

    setTimeout(function() {
      window.location.href = "{% url 'online_results' %}";
    }, 10);
  });
</script>

{% endblock %}
